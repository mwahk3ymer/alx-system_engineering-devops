#!/usr/bin/env bash
# Script to configure Nginx to listen on port 80

# Check if Nginx is running
nginx_status=$(service nginx status)
if [[ "$nginx_status" != *"active (running)"* ]]; then
    echo "Nginx is not running. Starting Nginx..."
    sudo service nginx start
fi

# Check if Nginx is listening on port 80
port_80_status=$(nc -zv 127.0.0.1 80 2>&1)
if [[ "$port_80_status" != *"succeeded!"* ]]; then
    echo "Nginx is not listening on port 80. Configuring Nginx..."
    
    # Modify Nginx configuration to listen on port 80
    sudo sed -i 's/listen 80 default_server;/listen 80;/g' /etc/nginx/sites-available/default
    
    # Reload Nginx to apply the changes
    sudo service nginx reload
    
    echo "Nginx configured to listen on port 80."
else
    echo "Nginx is already listening on port 80."
fi

# Display Nginx status
sudo service nginx status
